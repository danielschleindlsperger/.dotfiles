# homebrew formulae
- brewfile:
    - Brewfile

- link:
    ~/.gitconfig: gitconfig
    ~/.ssh/config:
      path: ssh/config
      create: true

# vim
- shell:
    - description: Install VimPlug for regular vim
      command: curl -fLo ~/.vim/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
    - description: Install VimPlug for neovim
      command: sh -c 'curl -fLo "${XDG_DATA_HOME:-$HOME/.local/share}"/nvim/site/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim'
- link:
    ~/.vimrc:
      path: vim/.vimrc
      create: true
      force: true
    ~/.config/nvim/init.vim:
      path: nvim/init.vim
      create: true
      force: true

# kitty configuration (terminal emulator)
- link:
    ~/.config/kitty/kitty.conf:
      path: kitty/kitty.conf
      create: true
      relink: true

# zsh configuration (zsh itself was installed with brew)
- shell:
    - description: Fix insecure directories (for completions), see https://github.com/ohmyzsh/ohmyzsh/issues/8205
      command: compaudit | xargs chmod g-w,o-w
- shell:
    - description: Install oh-my-zsh
      command: sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"
- link:
    ~/.zshrc:
      path: zsh/.zshrc
      force: true
      create: true
      relink: true
- link:
    /usr/local/bin/aws_completer:
      path: zsh/aws_completer
      create: true
      relink: true

# languages
- link:
    ~/.asdfrc:
      path: asdf/.asdfrc
      create: true
      relink: true
- asdf:
    - plugin: python
      global: 3.8.5
      versions:
        - 3.8.5
    - plugin: nodejs
      global: 14.12.0
      versions:
        - 12.18.4
        - 14.12.0
    - plugin: java
      global: zulu-11.41.23
      versions:
        - zulu-11.41.23
        - zulu-15.27.17
    - plugin: clojure
      global: 1.10.1
      versions:
        - 1.10.1
    - plugin: scala
      global: 2.13.3
      versions:
        - 2.13.3
    - plugin: golang
      global: 1.15
      versions:
        - 1.15
    # TODO: php

# vscode
- vscodefile:
    file: vscode/extensions.txt
- link:
    ~/Library/Application Support/Code/User/settings.json:
      path: vscode/settings.json
      create: true
      relink: true
    ~/Library/Application Support/Code/User/keybindings.json:
      path: vscode/keybindings.json
      create: true
      relink: true

# spectacle
- link:
    ~/Library/Application Support/Spectacle/Shortcuts.json:
      path: spectacle/Shortcuts.json
      create: true
      relink: true
      force: true

# macos
- shell:
    - description: Updating MacOS dock
      command: ./macos/dock-items.clj
      stdout: true
      stderr: true
    - description: Updating MacOS settings
      command: ./macos/macos.sh
      stdout: true
      stderr: true
